---
title: "ãƒãƒ¼ãƒ ã®Ruffè¨­å®šã‚’è¦‹ç›´ã—ã¦ã¿ãŸ"
emoji: "ğŸ”ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "ruff"]
published: false
publication_name: "spectee"
---

## ã¯ã˜ã‚ã«ãƒ»å°å…¥çµŒç·¯

Specteeã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã‚‹å’Œå±±ã¨ç”³ã—ã¾ã™ï¼
ç§ã®æ‰€å±ã™ã‚‹ãƒãƒ¼ãƒ ã§ã¯ã€Pythonã®é™çš„è§£æåŠã³ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«Ruffã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

https://docs.astral.sh/ruff/

ãƒãƒ¼ãƒ ã¸å°å…¥ã‚’å§‹ã‚ã¦ç´„1å¹´çµŒã¤ãŸã‚ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å«ã‚ã¦è¨­å®šã®è¦‹ç›´ã—ã‚’è¡Œã„ã¾ã—ãŸï¼

## æœ¬è¨˜äº‹ã®çµè«–

æœ¬è¨˜äº‹ã®æœ€çµ‚çš„ãªè¨­å®šã§ã™ã€‚

```toml:pyproject.toml
[tool.ruff]
# æŒ‡å®šã•ã‚ŒãŸPythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†(ä¸»ã«pyupgrade)
target-version = "py312" # Python >=3.12 or ==3.12


lint.select = [
    "F",  # pyflakes
    "E",  # pycodestyle
    "W",  # pycodestyle warnings
    "I",  # isort
    "D",  # pydocstyle
    "UP", # pyupgrade
    "N",  # pep8-naming
]

lint.ignore = [
    "D105", # undocumented-magic-method
    "D107", # undocumented-public-init
    "D205", # blank-line-after-summary
    "E402", # sys path before import
    "D415", # ends-in-punctuation
]

line-length = 100

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "D"] # __init__.pyã¯æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç„¡è¦–
```

```json:.vscode/settings.json
{
    // pythonã®è¨­å®šã ã‘æŠœç²‹
    "[python]": {
    "editor.defaultFormatter": "charliermarsh.ruff",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": "explicit"
    }
  }
}
```

## ç¾çŠ¶ã®è¨­å®š

ã¾ãšã¯ã€ç¾çŠ¶ã®è¨­å®šã§ã™ã€‚
`pyproject.toml`ãƒ•ã‚¡ã‚¤ãƒ«ã«Ruffã®ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

```toml:pyproject.toml
[tool.ruff]
lint.select = [
    "F", # pyflakes
    "E", # pycodestyle
    "W", # pycodestyle warnings
    "I", # isort
    "D", # pydocstyle
]
lint.ignore = [
    "D105", # undocumented-magic-method
    "D107", # undocumented-public-init
    "D205", # blank-line-after-summary
    "E402", # sys path before import
    "D415", # ends-in-punctuation
]

line-length = 100

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "D"] # __init__.pyã¯æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç„¡è¦–
```

ãƒ«ãƒ¼ãƒ«ã®è©³ç´°ã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://docs.astral.sh/ruff/rules/)å‚ç…§
ç°¡å˜ãªæ¦‚è¦ã‚’ğŸ‘‡ï¸ã«ã¾ã¨ã‚ã¾ã™ã€‚

| ãƒ«ãƒ¼ãƒ«å  | ç•¥ç§° | èª¬æ˜ |
| ------------- | ------------- | ----- |
| Pyflakes  | F  | æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„æœªå®šç¾©å¤‰æ•°ã®ãƒã‚§ãƒƒã‚¯ |
| pycodestyle  | E  | PEP8æº–æ‹ ã®ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«é•åã®ãƒã‚§ãƒƒã‚¯ |
| pydocestyle warning  | W | pycodestyleã®æ´¾ç”Ÿ |
| isort  | I | ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã®ãƒã‚§ãƒƒã‚¯ãƒ»ä¸¦ã³æ›¿ãˆ |
| pydocstyle  | D  | docstringã®ãƒã‚§ãƒƒã‚¯ |

ãã®ä»–ç‰¹å‡ºç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Š

- `convention = "google"`ã§docstringã®å½¢å¼ã‚’GoogleStyleã«è¨­å®š
- `__init__.py`ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€å€‹åˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨
- `line-length = 100`ã§æ”¹è¡Œã®æ–‡å­—æ•°ã‚’æŒ‡å®šâ€»

:::message
â€» æ–‡å­—æ•°ã¯[PEP8](https://pep8-ja.readthedocs.io/ja/latest/#id8)æº–æ‹ ã ã¨79æ–‡å­—ä»¥å†…ã§ã™ã€‚
ãƒãƒ¼ãƒ äº‹æƒ…ã«ã‚ˆã‚Š100æ–‡å­—ã¨ã—ã¦ã„ã¾ã™ã€‚
:::

é–‹ç™ºã§ã¯VsCodeã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€`.vscode/settings.json`ã‚‚è¨­å®šã—ã¾ã™ã€‚

```json:.vscode/settings.json
{
    // pythonã®è¨­å®šã ã‘æŠœç²‹
    "[python]": {
    "editor.defaultFormatter": "charliermarsh.ruff",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": "explicit"
    }
  }
}
```

ä¸Šè¨˜è¨­å®šã§å‹•ã‹ã™ã«ã¯Ruffã®æ‹¡å¼µæ©Ÿèƒ½ãŒå¿…é ˆã§ã™ã€‚

https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff

## é™çš„è§£æã®ç›®çš„ã¯ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒç¶šå¯èƒ½æ€§ã‚’é«˜ã‚ã‚‹ã€ã“ã¨

è¦‹ç›´ã—ã«å…¥ã‚‹å‰ã«â€¦ã€‚æœ€åˆã«é™çš„è§£æã®ç›®çš„ã‚’æ•´ç†ã—ã¾ã™ã€‚

é™çš„è§£æã«ä½•ã‚’æœŸå¾…ã™ã‚‹ã‹ã¯ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã“ã“ã§ã¯ã€ã“ã®è¨˜äº‹ã«ãŠã‘ã‚‹ç›®çš„ã‚’å®šç¾©ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãšã¯æŠ½è±¡ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã¨ã“ã‚ã®å®šç¾©ã€‚é™çš„è§£æãŒç›®æŒ‡ã™æœ€çµ‚ç›®çš„ã§ã™ã€‚
ã“ã‚Œã¯ **ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒç¶šå¯èƒ½æ€§ã‚’é«˜ã‚ã‚‹ã€** ã¨å®šç¾©ã—ã¾ã™ã€‚

ä¾‹ã¨ã—ã¦ã€æ›¸ç±ï¼š[å˜ä½“ãƒ†ã‚¹ãƒˆã®è€ƒãˆæ–¹/ä½¿ã„æ–¹](https://www.amazon.co.jp/%E5%8D%98%E4%BD%93%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9-%E4%BD%BF%E3%81%84%E6%96%B9-Vladimir-Khorikov/dp/4839981728)ã§ã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã®ç›®çš„ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

> 1.2 ãªãœå˜ä½“ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã®ã‹ï¼Ÿ
> å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ã§ä½•ã‚’æˆã—é‚ã’ãŸã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿãã®ç­”ãˆã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆé•·ã‚’æŒç¶šå¯èƒ½ãªã‚‚ã®ã«ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

https://www.amazon.co.jp/%E5%8D%98%E4%BD%93%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9-%E4%BD%BF%E3%81%84%E6%96%B9-Vladimir-Khorikov/dp/4839981728

ã‚‚ã†ä¸€ä¾‹ã€æ›¸ç±ï¼š[GitHub CI/CDå®Ÿè·µã‚¬ã‚¤ãƒ‰](https://gihyo.jp/book/2024/978-4-297-14173-8)ã§ã¯ã€CI/CDã®ç›®çš„ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

> 1.2 CI/CD
> CI/CDã®ç›®çš„ã¯æ¬¡ã®ã‚ˆã†ã«ã¾ã¨ã‚ã‚‰ã‚Œã¾ã™ã€‚
> ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®æŒç¶šå¯èƒ½æ€§ã‚’é«˜ã‚ã€é•·æœŸã«æ¸¡ã‚‹ä¾¡å€¤æä¾›ã‚’å®Ÿç¾ã™ã‚‹

https://gihyo.jp/book/2024/978-4-297-14173-8

ä¸¡ä¾‹ã¨ã‚‚ã« **ã€ŒæŒç¶šå¯èƒ½æ€§ã€** ã‚’ç›®çš„ã«æ²ã’ã¦ãŠã‚Š
ãã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸€ã¤ã¨ã—ã¦ã€Œé™çš„è§£æã€ã‚‚åŒæ ã«å­˜åœ¨ã—ã¦ã„ã‚‹ã¨è€ƒãˆã€æœ€çµ‚ç›®çš„ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚

æ¬¡ã«é™çš„è§£æãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒç¶šå¯èƒ½æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã§ãã‚‹å…·ä½“çš„ãªç›®çš„ã§ã™ã€‚
ã“ã‚Œã¯ **ã€Œé–‹ç™ºè€…å…¨å“¡ãŒã‚³ãƒ¼ãƒ‰å“è³ªã‚’ä¸€å®šã«ä¿ã¤ãŸã‚ã®ä»•çµ„ã¿ã€** ã¨å®šç¾©ã—ã¾ã™ã€‚

ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ãŠã‘ã‚‹ã‚³ãƒ¼ãƒ‰ã¯å¸¸ã«ä¸€å®šã®å“è³ªã§ä¿ãŸã‚Œã¦ã„ã‚‹ã“ã¨ã§ã€é–‹ç™ºè€…ã¯æœ¬è³ªçš„ãªä½œæ¥­ã«é›†ä¸­ã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒç¶šçš„æˆé•·ã‚’ä¿ƒã™ã“ã¨ãŒã§ãã‚‹ã¨è€ƒãˆã¾ã™ã€‚ãã®ãŸã‚ã®å–ã‚Šçµ„ã¿ã®ä¸€ã¤ã¨ã—ã¦ã€Œé™çš„è§£æã€ã‚’è¡Œã„ã¾ã™ã€‚
ğŸ‘‡ï¸ã¯é™çš„è§£æã«ã‚ˆã£ã¦å¾—ã‚‰ã‚Œã‚‹åŠ¹æœã®ä¸€ä¾‹ã§ã™ã€‚

- ãƒã‚°ã‚„ã‚¨ãƒ©ãƒ¼ã®æ—©æœŸç™ºè¦‹ã«å½¹ç«‹ã¦ã‚‹
  - ã‚¹ã‚­ãƒ«ãŒæœªæˆç†Ÿã§ã‚ã‚‹é–‹ç™ºè€…ã§ã‚‚ã€ä¸€å®šã®å“è³ªã‚’æ‹…ä¿ã—ãŸã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹
  - ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã«ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ãŒäº›ç´°ãªãƒŸã‚¹ã‚’æŒ‡æ‘˜ã›ãšã«æ¸ˆã‚€ï¼ˆæœ¬è³ªçš„ãªå¤‰æ›´ç®‡æ‰€ã«æ™‚é–“ã‚’ã‹ã‘ã‚‰ã‚Œã‚‹ï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å¼·åŒ–ã€‚æœªç„¶ã«è„†å¼±æ€§ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—å¯¾å¿œã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹

ã“ã‚Œã‚‰ã‚’é”æˆã™ã‚‹ä»•çµ„ã¿ã®æ•´å‚™ã¨è¦‹ç›´ã—ã‚’è¡Œã£ã¦ã„ãã®ãŒæœ¬è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

## è¦‹ç›´ã—ãƒã‚¤ãƒ³ãƒˆ

é™çš„è§£æã§é”æˆã—ãŸã„ç›®çš„ã¨ç¾çŠ¶ã®è¨­å®šã‚’è¸ã¾ãˆã€ç¾çŠ¶ã®è¨­å®šã‹ã‚‰è¦‹ç›´ã—ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

- å¤‰æ•°ã‚„ã‚¯ãƒ©ã‚¹åã®å‘½åè¦å‰‡ã®èª¤ã‚Šã‚’æ¤œçŸ¥ã—ãŸã„
- å¤ã„Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ›¸ãæ–¹ã‚’æ¤œçŸ¥ã—ãŸã„

ã„ãšã‚Œã‚‚ã€è¨­å®šã™ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å“è³ªã‚’ä¿ã¤ç›®çš„ã«è²¢çŒ®ã™ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™

### å¤‰æ•°ã‚„ã‚¯ãƒ©ã‚¹åã®å‘½åè¦å‰‡ã®èª¤ã‚Šã‚’æ¤œçŸ¥ã—ãŸã„

ç§ãŸã¡ã®ãƒãƒ¼ãƒ ã§ã¯ã€Pythonã®ä»–ã«TypeScriptã‚’ç”¨ã„ãŸé–‹ç™ºã‚’è¡Œã„ã¾ã™ã€‚
è¤‡æ•°è¨€èªã‚’è¡Œãæ¥ã™ã‚‹ã¨ã€Pythonã®ã‚³ãƒ¼ãƒ‰ã«TypeScriptã®å‘½åè¦å‰‡ã§æ›¸ã„ã¦ã—ã¾ã†å ´é¢ãŒã‚ã‚Šã¾ã—ãŸã€‚

ä¾‹ãˆã°ã€Pythonã®å¤‰æ•°åã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã§ã™ã€‚

```python
user_name = "Bob"
```

ä¸€æ–¹ã€TypeScriptã®å¤‰æ•°åã¯ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã§ã™ã€‚

```typescript
const userName = "Bob"
```

ã“ã®ã‚ˆã†ãªå‘½åè¦å‰‡ã«ã‚ˆã‚‹èª¤ã‚Šã‚’æ¸›ã‚‰ã™ãŸã‚ã«ã€Ruffã®è¨­å®šã«å­˜åœ¨ã™ã‚‹[pep8-naming](https://docs.astral.sh/ruff/rules/#pep8-naming-n)ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
pep8-namingã‚’ä½¿ç”¨ã™ã‚Œã°ã€ã‚¯ãƒ©ã‚¹ã‚„å¤‰æ•°åã®å‘½åè¦å‰‡ã‚’[PEP8](https://pep8-ja.readthedocs.io/ja/latest/#id23)ã«æº–æ‹ ã—ãŸæ›¸ãæ–¹ã«çµ±ä¸€ã§ãã¾ã™ã€‚

å‘½åè¦å‰‡ã«çµ±ä¸€æ„ŸãŒãªã„ã¨ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€æ™‚ã«ãƒã‚¤ã‚ºã‚’æ„Ÿã˜ã¦ã—ã¾ã†ãŸã‚ã€ãŠæ‰‹è»½ã«ã‹ã¤é«˜ã„åŠ¹æœã‚’å¾—ã‚‰ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Šã€‚`N`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```toml:pyproject.toml
[tool.ruff]
lint.select = [
    "N",  # pep8-naming
]
```

### å¤ã„Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ›¸ãæ–¹ã‚’æ¤œçŸ¥ã—ãŸã„

Pythonã¯è¨€èªè‡ªä½“ãŒãã‚Œãªã‚Šã®é »åº¦ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ä¼´ã„ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§éæ¨å¥¨ã«ãªã£ãŸæ›¸ãæ–¹ãŒã„ãã¤ã‹å­˜åœ¨ã—ã¾ã™ã€‚

ä¾‹ã¨ã—ã¦ã€`Optional`ã‚„`Union`å‹ã®æŒ‡å®šãŒã‚ã‚Šã¾ã™ã€‚
Python3.9ã¾ã§ã¯è¤‡æ•°ã®å‹ã®æŒ‡å®šã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª`typing`ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

```python
from typing import Optional


def to_number(s: str) -> Optional[int]:
    try:
        return int(s)
    except ValueError:
        return None
```

Python3.10ä»¥é™ã¯`|`ã§è¡¨ç¾ã§ãã¾ã™ã€‚

```python
def to_number(s: str) -> int | None:
    try:
        return int(s)
    except ValueError:
        return None
```

éæ¨å¥¨ã«ãªã£ãŸã‚³ãƒ¼ãƒ‰ã‚’æ”¾ç½®ã—ç¶šã‘ã‚‹ã¨ã€ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã‚µãƒãƒ¼ãƒˆãŒåˆ‡ã‚‰ã‚Œã¦ã—ã¾ã„ä¸å…·åˆã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚’å‡ºæ¥ã‚‹ã ã‘æ—©ã„æ®µéšã§æ¤œçŸ¥ã™ã‚‹ãŸã‚ã€[pyupgrade](https://docs.astral.sh/ruff/rules/#pyupgrade-up)ã‚’æ¡ç”¨ã—ã¾ã™ã€‚

è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Šã€‚
Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã®è¨­å®šï¼ˆ[target-version](https://docs.astral.sh/ruff/settings/#target-version)ï¼‰ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ãªãŠã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯`[project]`ã‚‚ã—ãã¯`[tool.ruff]`ã«æŒ‡å®šã—ã¾ã™ã€‚
ã©ã¡ã‚‰ã«ã‚‚æ›¸ã„ãŸå ´åˆã¯`[tool.ruff]`ã®`target-version`ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

```toml:pyproject.toml
#[project]
#requires-python = ">=3.12"

[tool.ruff]
# æŒ‡å®šã•ã‚ŒãŸPythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†
target-version = "py312" # Python >=3.12 or ==3.12 ã¨ã„ã†æ„å‘³

lint.select = [
    "UP", # pyupgrade
]
```

## è¦‹ç›´ã—å¾Œã®è¨­å®š

è¦‹ç›´ã—ã‚’å«ã‚ã¦æ•´ç†ã—ãŸ`pyproject.toml`ã¯ã“ã¡ã‚‰

```toml:pyproject.toml
[tool.ruff]
# æŒ‡å®šã•ã‚ŒãŸPythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†(ä¸»ã«pyupgrade)
target-version = "py312" # Python >=3.12 or ==3.12


lint.select = [
    "F",  # pyflakes
    "E",  # pycodestyle
    "W",  # pycodestyle warnings
    "I",  # isort
    "D",  # pydocstyle
    "UP", # pyupgrade
    "N",  # pep8-naming
]

lint.ignore = [
    "D105", # undocumented-magic-method
    "D107", # undocumented-public-init
    "D205", # blank-line-after-summary
    "E402", # sys path before import
    "D415", # ends-in-punctuation
]

line-length = 100

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "D"] # __init__.pyã¯æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç„¡è¦–
```

ãƒ«ãƒ¼ãƒ«ã®ä¸€è¨€èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Š

| ãƒ«ãƒ¼ãƒ«å  | ç•¥ç§° | èª¬æ˜ |
| ------------- | ------------- | ----- |
| Pyflakes  | F  | æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„æœªå®šç¾©å¤‰æ•°ã®ãƒã‚§ãƒƒã‚¯ |
| pycodestyle  | E  | PEP8æº–æ‹ ã®ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«é•åã®ãƒã‚§ãƒƒã‚¯ |
| pydocestyle warning  | W  | pycodestyleã®æ´¾ç”Ÿ |
| pydocstyle  | D  | docstringã®ãƒã‚§ãƒƒã‚¯ |
| isort  | I | ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã®ãƒã‚§ãƒƒã‚¯ãƒ»ä¸¦ã³æ›¿ãˆ |
| pyupgrade  | UP |  Pythonã‚³ãƒ¼ãƒ‰ãŒæœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ |
| pep8-naming  | N | Pythonã‚³ãƒ¼ãƒ‰ã®å‘½åè¦å‰‡ãŒPEP8ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ |

é–‹ç™ºã§ã¯VsCodeã®è¨­å®šã¯å¤‰æ›´ãªã—ã§ã™ã€‚

```json:.vscode/settings.json
{
    // pythonã®è¨­å®šã ã‘æŠœç²‹
    "[python]": {
    "editor.defaultFormatter": "charliermarsh.ruff",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": "explicit"
    }
  }
}
```

## ã¾ã¨ã‚

ä»Šå›ã¯Ruffã®è¨­å®šè¦‹ç›´ã—ã‚’è¡Œã„ã¾ã—ãŸã€‚è¦‹ç›´ã™ä¸Šã§ã€æ”¹ã‚ã¦Ruffã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’çœºã‚ã¦ã„ã‚‹ã¨æœ€åˆè¨­å®šã—ãŸé ƒã‹ã‚‰éšåˆ†å¢—ãˆãŸãªã‚â€¦ã¨ã„ã†å°è±¡ãŒã‚ã‚Šã¾ã—ãŸã€‚

ä»Šå¾Œã‚‚Ruffã®å‹•å‘ã‚’æ°—ã«ã—ã¤ã¤ã€å®šæœŸçš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’è¡Œã„
ãƒãƒ¼ãƒ å…¨å“¡ãŒãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã«é›†ä¸­ã§ãã‚‹ç’°å¢ƒã‚’ç”¨æ„ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼

## å‚è€ƒ

- [Rules | Ruff](https://docs.astral.sh/ruff/rules/)
- [å˜ä½“ãƒ†ã‚¹ãƒˆã®è€ƒãˆæ–¹/ä½¿ã„æ–¹](https://www.amazon.co.jp/%E5%8D%98%E4%BD%93%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9-%E4%BD%BF%E3%81%84%E6%96%B9-Vladimir-Khorikov/dp/4839981728)
- [GitHub CI/CDå®Ÿè·µã‚¬ã‚¤ãƒ‰](https://gihyo.jp/book/2024/978-4-297-14173-8)
- [pep8-ja](https://pep8-ja.readthedocs.io/ja/latest/)
